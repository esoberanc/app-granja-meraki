
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Monitoreo de Granja Tenebrio</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f5f6fa;
            margin: 0;
            padding: 0;
        }
        h1 {
            margin-top: 30px;
        }
        .status {
            margin: 20px;
        }
        .status button {
            background-color: #2ecc71;
            border: none;
            color: white;
            padding: 15px 25px;
            font-size: 18px;
            border-radius: 8px;
            cursor: not-allowed;
        }
        .sensor-container {
            position: relative;
            width: 900px;
            margin: 0 auto;
        }
        .sensor-image {
            width: 100%;
            border-radius: 10px;
        }
        .sensor-box {
            position: absolute;
            background-color: #2c3e50;
            color: white;
            padding: 8px 12px;
            border-radius: 10px;
            font-weight: bold;
        }
        .green { background-color: #27ae60; }
        .blue { background-color: #2980b9; }
        .red { background-color: #e74c3c; }
    </style>
</head>
<body>
    <h1>ðŸ“¡ Monitoreo de Granja Tenebrio</h1>
    <div class="status">
        <button disabled>âœ… Monitoreo activo</button>
    </div>
    <div class="sensor-container">
        <img src="static/Granja.png" alt="Granja" class="sensor-image">
        <div id="sensor1_temp" class="sensor-box" style="top: 90px; left: 60px;">--</div>
        <div id="sensor1_humidity" class="sensor-box" style="top: 140px; left: 60px;">--</div>
        <div id="sensor2_temp" class="sensor-box" style="top: 270px; left: 60px;">--</div>
        <div id="sensor2_humidity" class="sensor-box" style="top: 320px; left: 60px;">--</div>
        <div id="multi1_temp" class="sensor-box" style="top: 90px; left: 400px;">--</div>
        <div id="multi1_co2" class="sensor-box red" style="top: 140px; left: 400px;">--</div>
        <div id="multi1_pm25" class="sensor-box" style="top: 270px; left: 400px;">--</div>
        <div id="multi1_noise" class="sensor-box" style="top: 320px; left: 400px;">--</div>
        <div id="puerta1" class="sensor-box" style="top: 420px; left: 240px;">--</div>
        <div id="power1" class="sensor-box blue" style="top: 90px; left: 700px;">--</div>
        <div id="power2" class="sensor-box blue" style="top: 140px; left: 700px;">--</div>
    </div>

    <script>
        async function getSensorData() {
            try {
                const res = await fetch('/sensor-data');
                const data = await res.json();
                if (data.error) return;

                const fields = {
                    sensor1_temp: data.sensor1 + "Â°C",
                    sensor1_humidity: data.sensor1_humidity + "%",
                    sensor2_temp: data.sensor2 + "Â°C",
                    sensor2_humidity: data.sensor2_humidity + "%",
                    multi1_temp: data.multi1_temp + "Â°C",
                    multi1_co2: data.multi1_co2 + " ppm",
                    multi1_pm25: data.multi1_pm25 + " Âµg/mÂ³",
                    multi1_noise: data.multi1_noise + " dB",
                    puerta1: "Puerta: " + data.puerta1,
                    power1: data.power1 + " W",
                    power2: data.power2 + " W"
                };

                for (let id in fields) {
                    if (document.getElementById(id)) {
                        document.getElementById(id).textContent = fields[id];
                    }
                }
            } catch (e) {
                console.error("Error obteniendo datos:", e);
            }
        }

        setInterval(getSensorData, 5000);
        getSensorData();
    </script>
</body>
</html>
