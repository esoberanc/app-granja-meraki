<!DOCTYPE html>
<html lang="es">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   Monitoreo Meraki
  </title>
  <script src="https://cdn.tailwindcss.com">
  
window.addEventListener("DOMContentLoaded", () => {
    intervalo = setInterval(() => obtenerDatos(true), 10000);
});

</script>
  <style>
   #granja-container {
      position: relative;
      width: 621px;
      height: 409px;
    }
    #granja-img {
      width: 100%;
      height: auto;
    }
    .cuadro {
      position: absolute;
      width: 60px;
      height: 68px;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 12px;
      color: white;
      text-align: center;
      padding: 5px;
      white-space: pre-line;
    }

    #cuadro-9 { top: 147px; left: 25px; } /* Watts 1*/
    #cuadro-10 { top: 130px; left: 450px; } /* Watts 2*/
#cuadro-11 { top: 145px; left: 225px; }/* Hum 1*/
#cuadro-12 { top: 320px; left: 225px; } /* Hum 2*/
#cuadro-13 { top: 310px; left: 515px; } /* Temp 3*/
    #cuadro-1 { top: 70px; left: 225px; } /* Temp 1*/
    #cuadro-2 { top: 245px; left: 225px; } /* Temp 2 */
    #cuadro-4 { top: 230px; left: 515px; } /* CO2*/
    #cuadro-5 { top: 310px; left: 435px; } /* Noise */
    #cuadro-6 { top: 230px; left: 435px; } /* PM2.5 */
    #cuadro-8 { top: 378px; left: 284px; } /* Door */
  </style>
 </head>
 <body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen text-center">
  <div style="position: absolute; top: 20px; right: 20px;">
   <a href="/mt40" style="background-color: #2c3e50; color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; font-family: sans-serif; font-size: 14px; box-shadow: 0 2px 6px rgba(0,0,0,0.2);">
    üîå Ver Panel MT40
   </a>
  </div>
  <div style="position: absolute; top: 70px; right: 20px;">
   <a href="/graficas" style="background-color: #1e3a8a; color: white; padding: 10px 20px; border-radius: 8px; text-decoration: none; font-family: sans-serif; font-size: 14px; box-shadow: 0 2px 6px rgba(0,0,0,0.2);">
    üìä Ver Gr√°ficas
   </a>
  </div>
  <h1 class="text-2xl font-bold mt-6 mb-4">
   üì° Monitoreo de Granja Tenebrio
  </h1>
  <button class="mb-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded shadow" id="boton-toggle" onclick="toggleMonitoreo()">
   ‚èπÔ∏è Detener monitoreo
  </button>
  <p class="mb-4 text-sm text-gray-700 font-medium" id="estado">
   üü¢ Monitoreo activo
  </p>
  <div class="mb-4 text-lg font-semibold text-center" id="estado-general">
  </div>
  <div id="granja-container">
   <img alt="Granja" id="granja-img" src="Granja.png"/>
   <div class="cuadro" id="cuadro-1">
    --
   </div>
   <div class="cuadro" id="cuadro-2">
    --
   </div>
   <div class="cuadro" id="cuadro-4">
    --
   </div>
   <div class="cuadro" id="cuadro-5">
    --
   </div>
   <div class="cuadro" id="cuadro-6">
    --
   </div>
   <div class="cuadro" id="cuadro-8">
    --
   </div>
   <div class="cuadro" id="cuadro-9">
    --
   </div>
   <div class="cuadro" id="cuadro-10">
    --
   </div>
   <div class="cuadro" id="cuadro-11">
    --
   </div>
   <div class="cuadro" id="cuadro-12">
    --
   </div>
   <div class="cuadro" id="cuadro-13">
    --
   </div>
  </div>
  
 






<script>
  let intervalo = null;
  let activo = true;

  document.addEventListener("DOMContentLoaded", () => {
    activo = true;
    document.getElementById("estado").innerText = "üü¢ Monitoreo activo";
    document.getElementById("boton-toggle").innerText = "‚èπÔ∏è Detener monitoreo";
    intervalo = setInterval(() => getSensorData(true), 10000);
    getSensorData(true); // primer disparo inmediato
    console.log("‚úÖ Monitoreo iniciado autom√°ticamente al cargar.");
  });
</script>

</body>
</html>
