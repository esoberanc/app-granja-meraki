
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Dashboard Granja</title>
    <style>
        body {
            margin: 0;
            background: #111;
            color: white;
            font-family: Arial, sans-serif;
        }
        #fondo {
            position: relative;
            width: 100%;
            max-width: 1000px;
            margin: auto;
            display: block;
        }
        .cuadro {
            position: absolute;
            width: 110px;
            height: 50px;
            border-radius: 12px;
            color: white;
            text-align: center;
            padding-top: 12px;
            font-size: 14px;
            font-weight: bold;
        }
        #botones {
            text-align: center;
            margin: 15px 0;
        }
        button {
            padding: 10px 15px;
            font-size: 14px;
            border: none;
            border-radius: 8px;
            margin: 5px;
        }
        #mt40-btn {
            background-color: #007BFF;
            color: white;
            cursor: pointer;
        }
        #monitoreo-btn {
            background-color: #28a745;
            color: white;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div id="botones">
        <button id="monitoreo-btn" disabled>Monitoreo activo ✅</button>
        <button id="mt40-btn" onclick="window.location.href='/mt40'">Ir al panel MT40 ⚡</button>
    </div>
    <div style="position: relative;">
        <img id="fondo" src="/static/Granja.png" alt="Fondo Granja" />
        <!-- Cuadros de sensores -->
        <div class="cuadro" id="cuadro-1" style="top: 80px; left: 208px;">...</div>
        <div class="cuadro" id="cuadro-2" style="top: 255px; left: 208px;">...</div>
        <div class="cuadro" id="cuadro-4" style="top: 60px; left: 515px;">...</div>
        <div class="cuadro" id="cuadro-5" style="top: 155px; left: 475px;">...</div>
        <div class="cuadro" id="cuadro-8" style="top: 378px; left: 290px;">...</div>
        <div class="cuadro" id="cuadro-6" style="top: 120px; left: 208px;">...</div>
        <div class="cuadro" id="cuadro-7" style="top: 295px; left: 208px;">...</div>
        <div class="cuadro" id="cuadro-9" style="top: 100px; left: 515px;">...</div>
    </div>

    <script>
        async function getSensorData() {
            try {
                const res = await fetch("/sensor-data");
                const data = await res.json();
                document.getElementById("cuadro-1").textContent = `T1: ${data.sensor1}°C`;
                document.getElementById("cuadro-2").textContent = `T2: ${data.sensor2}°C`;
                document.getElementById("cuadro-4").textContent = `CO2: ${data.multi1_co2} ppm`;
                document.getElementById("cuadro-5").textContent = `Ruido: ${data.multi1_noise} dB`;
                document.getElementById("cuadro-8").textContent = `Puerta: ${data.puerta1}`;
                document.getElementById("cuadro-6").textContent = `H1: ${data.sensor1_humidity}%`;
                document.getElementById("cuadro-7").textContent = `H2: ${data.sensor2_humidity}%`;
                document.getElementById("cuadro-9").textContent = `T3: ${data.multi1_temp}°C`;
            } catch (err) {
                console.error("Error:", err);
                document.querySelectorAll(".cuadro").forEach(c => c.textContent = "Err");
            }
        }
        setInterval(getSensorData, 5000);
        getSensorData();
    </script>
</body>
</html>
